var ar=Object.defineProperty;var lr=(t,e,n)=>e in t?ar(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var re=(t,e,n)=>(lr(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function it(){}function vn(t){return t()}function Ie(){return Object.create(null)}function At(t){t.forEach(vn)}function kn(t){return typeof t=="function"}function $t(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ur(t){return Object.keys(t).length===0}function P(t,e){t.appendChild(e)}function z(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function Sn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function ct(t){return document.createElement(t)}function O(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Z(t){return document.createTextNode(t)}function et(){return Z(" ")}function ze(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function fr(t){return Array.from(t.childNodes)}function De(t,e){e=""+e,t.data!==e&&(t.data=e)}let Ot;function cr(){if(Ot===void 0){Ot=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ot=!0}}return Ot}function hr(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=ct("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=cr();let s;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=ze(window,"message",a=>{a.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{s=ze(r.contentWindow,"resize",e),e()}),P(t,r),()=>{(i||s&&r.contentWindow)&&s(),T(r)}}let Mt;function bt(t){Mt=t}function dr(){if(!Mt)throw new Error("Function called outside component initialization");return Mt}function An(t){dr().$$.on_mount.push(t)}const ut=[],He=[];let ht=[];const qe=[],pr=Promise.resolve();let ge=!1;function gr(){ge||(ge=!0,pr.then($n))}function Vt(t){ht.push(t)}const ie=new Set;let at=0;function $n(){if(at!==0)return;const t=Mt;do{try{for(;at<ut.length;){const e=ut[at];at++,bt(e),mr(e.$$)}}catch(e){throw ut.length=0,at=0,e}for(bt(null),ut.length=0,at=0;He.length;)He.pop()();for(let e=0;e<ht.length;e+=1){const n=ht[e];ie.has(n)||(ie.add(n),n())}ht.length=0}while(ut.length);for(;qe.length;)qe.pop()();ge=!1,ie.clear(),bt(t)}function mr(t){if(t.fragment!==null){t.update(),At(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Vt)}}function yr(t){const e=[],n=[];ht.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),ht=e}const Ht=new Set;let J;function _r(){J={r:0,c:[],p:J}}function wr(){J.r||At(J.c),J=J.p}function Y(t,e){t&&t.i&&(Ht.delete(t),t.i(e))}function nt(t,e,n,r){if(t&&t.o){if(Ht.has(t))return;Ht.add(t),J.c.push(()=>{Ht.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Bt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function xt(t){t&&t.c()}function dt(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),Vt(()=>{const s=t.$$.on_mount.map(vn).filter(kn);t.$$.on_destroy?t.$$.on_destroy.push(...s):At(s),t.$$.on_mount=[]}),i.forEach(Vt)}function pt(t,e){const n=t.$$;n.fragment!==null&&(yr(n.after_update),At(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function br(t,e){t.$$.dirty[0]===-1&&(ut.push(t),gr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Pt(t,e,n,r,i,s,a,o=[-1]){const l=Mt;bt(t);const u=t.$$={fragment:null,ctx:[],props:s,update:it,not_equal:i,bound:Ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Ie(),dirty:o,skip_bound:!1,root:e.target||l.$$.root};a&&a(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(f,h,...p)=>{const d=p.length?p[0]:h;return u.ctx&&i(u.ctx[f],u.ctx[f]=d)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](d),c&&br(t,f)),h}):[],u.update(),c=!0,At(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=fr(e.target);u.fragment&&u.fragment.l(f),f.forEach(T)}else u.fragment&&u.fragment.c();e.intro&&Y(t.$$.fragment),dt(t,e.target,e.anchor),$n()}bt(l)}class Nt{constructor(){re(this,"$$");re(this,"$$set")}$destroy(){pt(this,1),this.$destroy=it}$on(e,n){if(!kn(n))return it;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!ur(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xr);var We={},se={},oe=34,yt=10,ae=13;function Pn(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Mr(t,e){var n=Pn(t);return function(r,i){return e(n(r),i,t)}}function Fe(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function I(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function vr(t){return t<0?"-"+I(-t,6):t>9999?"+"+I(t,6):I(t,4)}function kr(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":vr(t.getUTCFullYear())+"-"+I(t.getUTCMonth()+1,2)+"-"+I(t.getUTCDate(),2)+(i?"T"+I(e,2)+":"+I(n,2)+":"+I(r,2)+"."+I(i,3)+"Z":r?"T"+I(e,2)+":"+I(n,2)+":"+I(r,2)+"Z":n||e?"T"+I(e,2)+":"+I(n,2)+"Z":"")}function Sr(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,h){var p,d,g=i(f,function(m,y){if(p)return p(m,y-1);d=m,p=h?Mr(m,h):Pn(m)});return g.columns=d||[],g}function i(f,h){var p=[],d=f.length,g=0,m=0,y,_=d<=0,w=!1;f.charCodeAt(d-1)===yt&&--d,f.charCodeAt(d-1)===ae&&--d;function k(){if(_)return se;if(w)return w=!1,We;var S,C=g,E;if(f.charCodeAt(C)===oe){for(;g++<d&&f.charCodeAt(g)!==oe||f.charCodeAt(++g)===oe;);return(S=g)>=d?_=!0:(E=f.charCodeAt(g++))===yt?w=!0:E===ae&&(w=!0,f.charCodeAt(g)===yt&&++g),f.slice(C+1,S-1).replace(/""/g,'"')}for(;g<d;){if((E=f.charCodeAt(S=g++))===yt)w=!0;else if(E===ae)w=!0,f.charCodeAt(g)===yt&&++g;else if(E!==n)continue;return f.slice(C,S)}return _=!0,f.slice(C,d)}for(;(y=k())!==se;){for(var M=[];y!==We&&y!==se;)M.push(y),y=k();h&&(M=h(M,m++))==null||p.push(M)}return p}function s(f,h){return f.map(function(p){return h.map(function(d){return c(p[d])}).join(t)})}function a(f,h){return h==null&&(h=Fe(f)),[h.map(c).join(t)].concat(s(f,h)).join(`
`)}function o(f,h){return h==null&&(h=Fe(f)),s(f,h).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(t)}function c(f){return f==null?"":f instanceof Date?kr(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:o,formatRows:l,formatRow:u,formatValue:c}}var Ar=Sr(","),$r=Ar.parse;function le(t,e,n){if(t&&t.length){const[r,i]=e,s=Math.PI/180*n,a=Math.cos(s),o=Math.sin(s);for(const l of t){const[u,c]=l;l[0]=(u-r)*a-(c-i)*o+r,l[1]=(u-r)*o+(c-i)*a+i}}}function Pr(t,e){return t[0]===e[0]&&t[1]===e[1]}function Nr(t,e,n,r=1){const i=n,s=Math.max(e,.1),a=t[0]&&t[0][0]&&typeof t[0][0]=="number"?[t]:t,o=[0,0];if(i)for(const u of a)le(u,o,i);const l=function(u,c,f){const h=[];for(const _ of u){const w=[..._];Pr(w[0],w[w.length-1])||w.push([w[0][0],w[0][1]]),w.length>2&&h.push(w)}const p=[];c=Math.max(c,.1);const d=[];for(const _ of h)for(let w=0;w<_.length-1;w++){const k=_[w],M=_[w+1];if(k[1]!==M[1]){const S=Math.min(k[1],M[1]);d.push({ymin:S,ymax:Math.max(k[1],M[1]),x:S===k[1]?k[0]:M[0],islope:(M[0]-k[0])/(M[1]-k[1])})}}if(d.sort((_,w)=>_.ymin<w.ymin?-1:_.ymin>w.ymin?1:_.x<w.x?-1:_.x>w.x?1:_.ymax===w.ymax?0:(_.ymax-w.ymax)/Math.abs(_.ymax-w.ymax)),!d.length)return p;let g=[],m=d[0].ymin,y=0;for(;g.length||d.length;){if(d.length){let _=-1;for(let w=0;w<d.length&&!(d[w].ymin>m);w++)_=w;d.splice(0,_+1).forEach(w=>{g.push({s:m,edge:w})})}if(g=g.filter(_=>!(_.edge.ymax<=m)),g.sort((_,w)=>_.edge.x===w.edge.x?0:(_.edge.x-w.edge.x)/Math.abs(_.edge.x-w.edge.x)),(f!==1||y%c==0)&&g.length>1)for(let _=0;_<g.length;_+=2){const w=_+1;if(w>=g.length)break;const k=g[_].edge,M=g[w].edge;p.push([[Math.round(k.x),m],[Math.round(M.x),m]])}m+=f,g.forEach(_=>{_.edge.x=_.edge.x+f*_.edge.islope}),y++}return p}(a,s,r);if(i){for(const u of a)le(u,o,-i);(function(u,c,f){const h=[];u.forEach(p=>h.push(...p)),le(h,c,f)})(l,o,-i)}return l}function Ct(t,e){var n;const r=e.hachureAngle+90;let i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.round(Math.max(i,.1));let s=1;return e.roughness>=1&&(((n=e.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=i),Nr(t,i,r,s||1)}class $e{constructor(e){this.helper=e}fillPolygons(e,n){return this._fillPolygons(e,n)}_fillPolygons(e,n){const r=Ct(e,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(e,n){const r=[];for(const i of e)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function ne(t){const e=t[0],n=t[1];return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}class Cr extends $e{fillPolygons(e,n){let r=n.hachureGap;r<0&&(r=4*n.strokeWidth),r=Math.max(r,.1);const i=Ct(e,Object.assign({},n,{hachureGap:r})),s=Math.PI/180*n.hachureAngle,a=[],o=.5*r*Math.cos(s),l=.5*r*Math.sin(s);for(const[u,c]of i)ne([u,c])&&a.push([[u[0]-o,u[1]+l],[...c]],[[u[0]+o,u[1]-l],[...c]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class Er extends $e{fillPolygons(e,n){const r=this._fillPolygons(e,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(e,i);return r.ops=r.ops.concat(s.ops),r}}class Or{constructor(e){this.helper=e}fillPolygons(e,n){const r=Ct(e,n=Object.assign({},n,{hachureAngle:0}));return this.dotsOnLines(r,n)}dotsOnLines(e,n){const r=[];let i=n.hachureGap;i<0&&(i=4*n.strokeWidth),i=Math.max(i,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const a=i/4;for(const o of e){const l=ne(o),u=l/i,c=Math.ceil(u)-1,f=l-c*i,h=(o[0][0]+o[1][0])/2-i/4,p=Math.min(o[0][1],o[1][1]);for(let d=0;d<c;d++){const g=p+f+d*i,m=h-a+2*Math.random()*a,y=g-a+2*Math.random()*a,_=this.helper.ellipse(m,y,s,s,n);r.push(..._.ops)}}return{type:"fillSketch",ops:r}}}class Tr{constructor(e){this.helper=e}fillPolygons(e,n){const r=Ct(e,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(e,n){const r=n.dashOffset<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashGap,s=[];return e.forEach(a=>{const o=ne(a),l=Math.floor(o/(r+i)),u=(o+i-l*(r+i))/2;let c=a[0],f=a[1];c[0]>f[0]&&(c=a[1],f=a[0]);const h=Math.atan((f[1]-c[1])/(f[0]-c[0]));for(let p=0;p<l;p++){const d=p*(r+i),g=d+r,m=[c[0]+d*Math.cos(h)+u*Math.cos(h),c[1]+d*Math.sin(h)+u*Math.sin(h)],y=[c[0]+g*Math.cos(h)+u*Math.cos(h),c[1]+g*Math.sin(h)+u*Math.sin(h)];s.push(...this.helper.doubleLineOps(m[0],m[1],y[0],y[1],n))}}),s}}class Lr{constructor(e){this.helper=e}fillPolygons(e,n){const r=n.hachureGap<0?4*n.strokeWidth:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset,s=Ct(e,n=Object.assign({},n,{hachureGap:r+i}));return{type:"fillSketch",ops:this.zigzagLines(s,i,n)}}zigzagLines(e,n,r){const i=[];return e.forEach(s=>{const a=ne(s),o=Math.round(a/(2*n));let l=s[0],u=s[1];l[0]>u[0]&&(l=s[1],u=s[0]);const c=Math.atan((u[1]-l[1])/(u[0]-l[0]));for(let f=0;f<o;f++){const h=2*f*n,p=2*(f+1)*n,d=Math.sqrt(2*Math.pow(n,2)),g=[l[0]+h*Math.cos(c),l[1]+h*Math.sin(c)],m=[l[0]+p*Math.cos(c),l[1]+p*Math.sin(c)],y=[g[0]+d*Math.cos(c+Math.PI/4),g[1]+d*Math.sin(c+Math.PI/4)];i.push(...this.helper.doubleLineOps(g[0],g[1],y[0],y[1],r),...this.helper.doubleLineOps(y[0],y[1],m[0],m[1],r))}}),i}}const R={};class Rr{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const Ir=0,ue=1,Ve=2,Tt={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function fe(t,e){return t.type===e}function Pe(t){const e=[],n=function(a){const o=new Array;for(;a!=="";)if(a.match(/^([ \t\r\n,]+)/))a=a.substr(RegExp.$1.length);else if(a.match(/^([aAcChHlLmMqQsStTvVzZ])/))o[o.length]={type:Ir,text:RegExp.$1},a=a.substr(RegExp.$1.length);else{if(!a.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];o[o.length]={type:ue,text:`${parseFloat(RegExp.$1)}`},a=a.substr(RegExp.$1.length)}return o[o.length]={type:Ve,text:""},o}(t);let r="BOD",i=0,s=n[i];for(;!fe(s,Ve);){let a=0;const o=[];if(r==="BOD"){if(s.text!=="M"&&s.text!=="m")return Pe("M0,0"+t);i++,a=Tt[s.text],r=s.text}else fe(s,ue)?a=Tt[r]:(i++,a=Tt[s.text],r=s.text);if(!(i+a<n.length))throw new Error("Path data ended short");for(let l=i;l<i+a;l++){const u=n[l];if(!fe(u,ue))throw new Error("Param not a number: "+r+","+u.text);o[o.length]=+u.text}if(typeof Tt[r]!="number")throw new Error("Bad segment: "+r);{const l={key:r,data:o};e.push(l),i+=a,s=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}}return e}function Nn(t){let e=0,n=0,r=0,i=0;const s=[];for(const{key:a,data:o}of t)switch(a){case"M":s.push({key:"M",data:[...o]}),[e,n]=o,[r,i]=o;break;case"m":e+=o[0],n+=o[1],s.push({key:"M",data:[e,n]}),r=e,i=n;break;case"L":s.push({key:"L",data:[...o]}),[e,n]=o;break;case"l":e+=o[0],n+=o[1],s.push({key:"L",data:[e,n]});break;case"C":s.push({key:"C",data:[...o]}),e=o[4],n=o[5];break;case"c":{const l=o.map((u,c)=>c%2?u+n:u+e);s.push({key:"C",data:l}),e=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...o]}),e=o[2],n=o[3];break;case"q":{const l=o.map((u,c)=>c%2?u+n:u+e);s.push({key:"Q",data:l}),e=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...o]}),e=o[5],n=o[6];break;case"a":e+=o[5],n+=o[6],s.push({key:"A",data:[o[0],o[1],o[2],o[3],o[4],e,n]});break;case"H":s.push({key:"H",data:[...o]}),e=o[0];break;case"h":e+=o[0],s.push({key:"H",data:[e]});break;case"V":s.push({key:"V",data:[...o]}),n=o[0];break;case"v":n+=o[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...o]}),e=o[2],n=o[3];break;case"s":{const l=o.map((u,c)=>c%2?u+n:u+e);s.push({key:"S",data:l}),e=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...o]}),e=o[0],n=o[1];break;case"t":e+=o[0],n+=o[1],s.push({key:"T",data:[e,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),e=r,n=i}return s}function Cn(t){const e=[];let n="",r=0,i=0,s=0,a=0,o=0,l=0;for(const{key:u,data:c}of t){switch(u){case"M":e.push({key:"M",data:[...c]}),[r,i]=c,[s,a]=c;break;case"C":e.push({key:"C",data:[...c]}),r=c[4],i=c[5],o=c[2],l=c[3];break;case"L":e.push({key:"L",data:[...c]}),[r,i]=c;break;case"H":r=c[0],e.push({key:"L",data:[r,i]});break;case"V":i=c[0],e.push({key:"L",data:[r,i]});break;case"S":{let f=0,h=0;n==="C"||n==="S"?(f=r+(r-o),h=i+(i-l)):(f=r,h=i),e.push({key:"C",data:[f,h,...c]}),o=c[0],l=c[1],r=c[2],i=c[3];break}case"T":{const[f,h]=c;let p=0,d=0;n==="Q"||n==="T"?(p=r+(r-o),d=i+(i-l)):(p=r,d=i);const g=r+2*(p-r)/3,m=i+2*(d-i)/3,y=f+2*(p-f)/3,_=h+2*(d-h)/3;e.push({key:"C",data:[g,m,y,_,f,h]}),o=p,l=d,r=f,i=h;break}case"Q":{const[f,h,p,d]=c,g=r+2*(f-r)/3,m=i+2*(h-i)/3,y=p+2*(f-p)/3,_=d+2*(h-d)/3;e.push({key:"C",data:[g,m,y,_,p,d]}),o=f,l=h,r=p,i=d;break}case"A":{const f=Math.abs(c[0]),h=Math.abs(c[1]),p=c[2],d=c[3],g=c[4],m=c[5],y=c[6];f===0||h===0?(e.push({key:"C",data:[r,i,m,y,m,y]}),r=m,i=y):(r!==m||i!==y)&&(En(r,i,m,y,f,h,p,d,g).forEach(function(_){e.push({key:"C",data:_})}),r=m,i=y);break}case"Z":e.push({key:"Z",data:[]}),r=s,i=a}n=u}return e}function _t(t,e,n){return[t*Math.cos(n)-e*Math.sin(n),t*Math.sin(n)+e*Math.cos(n)]}function En(t,e,n,r,i,s,a,o,l,u){const c=(f=a,Math.PI*f/180);var f;let h=[],p=0,d=0,g=0,m=0;if(u)[p,d,g,m]=u;else{[t,e]=_t(t,e,-c),[n,r]=_t(n,r,-c);const A=(t-n)/2,$=(e-r)/2;let H=A*A/(i*i)+$*$/(s*s);H>1&&(H=Math.sqrt(H),i*=H,s*=H);const F=i*i,V=s*s,ot=F*V-F*$*$-V*A*A,B=F*$*$+V*A*A,Re=(o===l?-1:1)*Math.sqrt(Math.abs(ot/B));g=Re*i*$/s+(t+n)/2,m=Re*-s*A/i+(e+r)/2,p=Math.asin(parseFloat(((e-m)/s).toFixed(9))),d=Math.asin(parseFloat(((r-m)/s).toFixed(9))),t<g&&(p=Math.PI-p),n<g&&(d=Math.PI-d),p<0&&(p=2*Math.PI+p),d<0&&(d=2*Math.PI+d),l&&p>d&&(p-=2*Math.PI),!l&&d>p&&(d-=2*Math.PI)}let y=d-p;if(Math.abs(y)>120*Math.PI/180){const A=d,$=n,H=r;d=l&&d>p?p+120*Math.PI/180*1:p+120*Math.PI/180*-1,h=En(n=g+i*Math.cos(d),r=m+s*Math.sin(d),$,H,i,s,a,0,l,[d,A,g,m])}y=d-p;const _=Math.cos(p),w=Math.sin(p),k=Math.cos(d),M=Math.sin(d),S=Math.tan(y/4),C=4/3*i*S,E=4/3*s*S,st=[t,e],L=[t+C*w,e-E*_],v=[n+C*M,r-E*k],U=[n,r];if(L[0]=2*st[0]-L[0],L[1]=2*st[1]-L[1],u)return[L,v,U].concat(h);{h=[L,v,U].concat(h);const A=[];for(let $=0;$<h.length;$+=3){const H=_t(h[$][0],h[$][1],c),F=_t(h[$+1][0],h[$+1][1],c),V=_t(h[$+2][0],h[$+2][1],c);A.push([H[0],H[1],F[0],F[1],V[0],V[1]])}return A}}const zr={randOffset:function(t,e){return x(t,e)},randOffsetWithRange:function(t,e,n){return Gt(t,e,n)},ellipse:function(t,e,n,r,i){const s=Tn(n,r,i);return me(t,e,i,s).opset},doubleLineOps:function(t,e,n,r,i){return j(t,e,n,r,i,!0)}};function On(t,e,n,r,i){return{type:"path",ops:j(t,e,n,r,i)}}function qt(t,e,n){const r=(t||[]).length;if(r>2){const i=[];for(let s=0;s<r-1;s++)i.push(...j(t[s][0],t[s][1],t[s+1][0],t[s+1][1],n));return e&&i.push(...j(t[r-1][0],t[r-1][1],t[0][0],t[0][1],n)),{type:"path",ops:i}}return r===2?On(t[0][0],t[0][1],t[1][0],t[1][1],n):{type:"path",ops:[]}}function Dr(t,e,n,r,i){return function(s,a){return qt(s,!0,a)}([[t,e],[t+n,e],[t+n,e+r],[t,e+r]],i)}function Be(t,e){if(t.length){const n=typeof t[0][0]=="number"?[t]:t,r=Lt(n[0],1*(1+.2*e.roughness),e),i=e.disableMultiStroke?[]:Lt(n[0],1.5*(1+.22*e.roughness),Ze(e));for(let s=1;s<n.length;s++){const a=n[s];if(a.length){const o=Lt(a,1*(1+.2*e.roughness),e),l=e.disableMultiStroke?[]:Lt(a,1.5*(1+.22*e.roughness),Ze(e));for(const u of o)u.op!=="move"&&r.push(u);for(const u of l)u.op!=="move"&&i.push(u)}}return{type:"path",ops:r.concat(i)}}return{type:"path",ops:[]}}function Tn(t,e,n){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),s=2*Math.PI/i;let a=Math.abs(t/2),o=Math.abs(e/2);const l=1-n.curveFitting;return a+=x(a*l,n),o+=x(o*l,n),{increment:s,rx:a,ry:o}}function me(t,e,n,r){const[i,s]=Qe(r.increment,t,e,r.rx,r.ry,1,r.increment*Gt(.1,Gt(.4,1,n),n),n);let a=Ut(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[o]=Qe(r.increment,t,e,r.rx,r.ry,1.5,0,n),l=Ut(o,null,n);a=a.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:a}}}function Ge(t,e,n,r,i,s,a,o,l){const u=t,c=e;let f=Math.abs(n/2),h=Math.abs(r/2);f+=x(.01*f,l),h+=x(.01*h,l);let p=i,d=s;for(;p<0;)p+=2*Math.PI,d+=2*Math.PI;d-p>2*Math.PI&&(p=0,d=2*Math.PI);const g=2*Math.PI/l.curveStepCount,m=Math.min(g/2,(d-p)/2),y=Ye(m,u,c,f,h,p,d,1,l);if(!l.disableMultiStroke){const _=Ye(m,u,c,f,h,p,d,1.5,l);y.push(..._)}return a&&(o?y.push(...j(u,c,u+f*Math.cos(p),c+h*Math.sin(p),l),...j(u,c,u+f*Math.cos(d),c+h*Math.sin(d),l)):y.push({op:"lineTo",data:[u,c]},{op:"lineTo",data:[u+f*Math.cos(p),c+h*Math.sin(p)]})),{type:"path",ops:y}}function Ue(t,e){const n=Cn(Nn(Pe(t))),r=[];let i=[0,0],s=[0,0];for(const{key:a,data:o}of n)switch(a){case"M":s=[o[0],o[1]],i=[o[0],o[1]];break;case"L":r.push(...j(s[0],s[1],o[0],o[1],e)),s=[o[0],o[1]];break;case"C":{const[l,u,c,f,h,p]=o;r.push(...Hr(l,u,c,f,h,p,s,e)),s=[h,p];break}case"Z":r.push(...j(s[0],s[1],i[0],i[1],e)),s=[i[0],i[1]]}return{type:"path",ops:r}}function ce(t,e){const n=[];for(const r of t)if(r.length){const i=e.maxRandomnessOffset||0,s=r.length;if(s>2){n.push({op:"move",data:[r[0][0]+x(i,e),r[0][1]+x(i,e)]});for(let a=1;a<s;a++)n.push({op:"lineTo",data:[r[a][0]+x(i,e),r[a][1]+x(i,e)]})}}return{type:"fillPath",ops:n}}function lt(t,e){return function(n,r){let i=n.fillStyle||"hachure";if(!R[i])switch(i){case"zigzag":R[i]||(R[i]=new Cr(r));break;case"cross-hatch":R[i]||(R[i]=new Er(r));break;case"dots":R[i]||(R[i]=new Or(r));break;case"dashed":R[i]||(R[i]=new Tr(r));break;case"zigzag-line":R[i]||(R[i]=new Lr(r));break;default:i="hachure",R[i]||(R[i]=new $e(r))}return R[i]}(e,zr).fillPolygons(t,e)}function Ze(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function Ln(t){return t.randomizer||(t.randomizer=new Rr(t.seed||0)),t.randomizer.next()}function Gt(t,e,n,r=1){return n.roughness*r*(Ln(n)*(e-t)+t)}function x(t,e,n=1){return Gt(-t,t,e,n)}function j(t,e,n,r,i,s=!1){const a=s?i.disableMultiStrokeFill:i.disableMultiStroke,o=ye(t,e,n,r,i,!0,!1);if(a)return o;const l=ye(t,e,n,r,i,!0,!0);return o.concat(l)}function ye(t,e,n,r,i,s,a){const o=Math.pow(t-n,2)+Math.pow(e-r,2),l=Math.sqrt(o);let u=1;u=l<200?1:l>500?.4:-.0016668*l+1.233334;let c=i.maxRandomnessOffset||0;c*c*100>o&&(c=l/10);const f=c/2,h=.2+.2*Ln(i);let p=i.bowing*i.maxRandomnessOffset*(r-e)/200,d=i.bowing*i.maxRandomnessOffset*(t-n)/200;p=x(p,i,u),d=x(d,i,u);const g=[],m=()=>x(f,i,u),y=()=>x(c,i,u),_=i.preserveVertices;return s&&(a?g.push({op:"move",data:[t+(_?0:m()),e+(_?0:m())]}):g.push({op:"move",data:[t+(_?0:x(c,i,u)),e+(_?0:x(c,i,u))]})),a?g.push({op:"bcurveTo",data:[p+t+(n-t)*h+m(),d+e+(r-e)*h+m(),p+t+2*(n-t)*h+m(),d+e+2*(r-e)*h+m(),n+(_?0:m()),r+(_?0:m())]}):g.push({op:"bcurveTo",data:[p+t+(n-t)*h+y(),d+e+(r-e)*h+y(),p+t+2*(n-t)*h+y(),d+e+2*(r-e)*h+y(),n+(_?0:y()),r+(_?0:y())]}),g}function Lt(t,e,n){if(!t.length)return[];const r=[];r.push([t[0][0]+x(e,n),t[0][1]+x(e,n)]),r.push([t[0][0]+x(e,n),t[0][1]+x(e,n)]);for(let i=1;i<t.length;i++)r.push([t[i][0]+x(e,n),t[i][1]+x(e,n)]),i===t.length-1&&r.push([t[i][0]+x(e,n),t[i][1]+x(e,n)]);return Ut(r,null,n)}function Ut(t,e,n){const r=t.length,i=[];if(r>3){const s=[],a=1-n.curveTightness;i.push({op:"move",data:[t[1][0],t[1][1]]});for(let o=1;o+2<r;o++){const l=t[o];s[0]=[l[0],l[1]],s[1]=[l[0]+(a*t[o+1][0]-a*t[o-1][0])/6,l[1]+(a*t[o+1][1]-a*t[o-1][1])/6],s[2]=[t[o+1][0]+(a*t[o][0]-a*t[o+2][0])/6,t[o+1][1]+(a*t[o][1]-a*t[o+2][1])/6],s[3]=[t[o+1][0],t[o+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}if(e&&e.length===2){const o=n.maxRandomnessOffset;i.push({op:"lineTo",data:[e[0]+x(o,n),e[1]+x(o,n)]})}}else r===3?(i.push({op:"move",data:[t[1][0],t[1][1]]}),i.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):r===2&&i.push(...ye(t[0][0],t[0][1],t[1][0],t[1][1],n,!0,!0));return i}function Qe(t,e,n,r,i,s,a,o){const l=[],u=[];if(o.roughness===0){t/=4,u.push([e+r*Math.cos(-t),n+i*Math.sin(-t)]);for(let c=0;c<=2*Math.PI;c+=t){const f=[e+r*Math.cos(c),n+i*Math.sin(c)];l.push(f),u.push(f)}u.push([e+r*Math.cos(0),n+i*Math.sin(0)]),u.push([e+r*Math.cos(t),n+i*Math.sin(t)])}else{const c=x(.5,o)-Math.PI/2;u.push([x(s,o)+e+.9*r*Math.cos(c-t),x(s,o)+n+.9*i*Math.sin(c-t)]);const f=2*Math.PI+c-.01;for(let h=c;h<f;h+=t){const p=[x(s,o)+e+r*Math.cos(h),x(s,o)+n+i*Math.sin(h)];l.push(p),u.push(p)}u.push([x(s,o)+e+r*Math.cos(c+2*Math.PI+.5*a),x(s,o)+n+i*Math.sin(c+2*Math.PI+.5*a)]),u.push([x(s,o)+e+.98*r*Math.cos(c+a),x(s,o)+n+.98*i*Math.sin(c+a)]),u.push([x(s,o)+e+.9*r*Math.cos(c+.5*a),x(s,o)+n+.9*i*Math.sin(c+.5*a)])}return[u,l]}function Ye(t,e,n,r,i,s,a,o,l){const u=s+x(.1,l),c=[];c.push([x(o,l)+e+.9*r*Math.cos(u-t),x(o,l)+n+.9*i*Math.sin(u-t)]);for(let f=u;f<=a;f+=t)c.push([x(o,l)+e+r*Math.cos(f),x(o,l)+n+i*Math.sin(f)]);return c.push([e+r*Math.cos(a),n+i*Math.sin(a)]),c.push([e+r*Math.cos(a),n+i*Math.sin(a)]),Ut(c,null,l)}function Hr(t,e,n,r,i,s,a,o){const l=[],u=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.3];let c=[0,0];const f=o.disableMultiStroke?1:2,h=o.preserveVertices;for(let p=0;p<f;p++)p===0?l.push({op:"move",data:[a[0],a[1]]}):l.push({op:"move",data:[a[0]+(h?0:x(u[0],o)),a[1]+(h?0:x(u[0],o))]}),c=h?[i,s]:[i+x(u[p],o),s+x(u[p],o)],l.push({op:"bcurveTo",data:[t+x(u[p],o),e+x(u[p],o),n+x(u[p],o),r+x(u[p],o),c[0],c[1]]});return l}function wt(t){return[...t]}function je(t,e=0){const n=t.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(wt(t[0]),wt(t[1]),wt(t[2]),wt(t[2]));else{const i=[];i.push(t[0],t[0]);for(let o=1;o<t.length;o++)i.push(t[o]),o===t.length-1&&i.push(t[o]);const s=[],a=1-e;r.push(wt(i[0]));for(let o=1;o+2<i.length;o++){const l=i[o];s[0]=[l[0],l[1]],s[1]=[l[0]+(a*i[o+1][0]-a*i[o-1][0])/6,l[1]+(a*i[o+1][1]-a*i[o-1][1])/6],s[2]=[i[o+1][0]+(a*i[o][0]-a*i[o+2][0])/6,i[o+1][1]+(a*i[o][1]-a*i[o+2][1])/6],s[3]=[i[o+1][0],i[o+1][1]],r.push(s[1],s[2],s[3])}}return r}function Wt(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function qr(t,e,n){const r=Wt(e,n);if(r===0)return Wt(t,e);let i=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/r;return i=Math.max(0,Math.min(1,i)),Wt(t,X(e,n,i))}function X(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function _e(t,e,n,r){const i=r||[];if(function(o,l){const u=o[l+0],c=o[l+1],f=o[l+2],h=o[l+3];let p=3*c[0]-2*u[0]-h[0];p*=p;let d=3*c[1]-2*u[1]-h[1];d*=d;let g=3*f[0]-2*h[0]-u[0];g*=g;let m=3*f[1]-2*h[1]-u[1];return m*=m,p<g&&(p=g),d<m&&(d=m),p+d}(t,e)<n){const o=t[e+0];i.length?(s=i[i.length-1],a=o,Math.sqrt(Wt(s,a))>1&&i.push(o)):i.push(o),i.push(t[e+3])}else{const l=t[e+0],u=t[e+1],c=t[e+2],f=t[e+3],h=X(l,u,.5),p=X(u,c,.5),d=X(c,f,.5),g=X(h,p,.5),m=X(p,d,.5),y=X(g,m,.5);_e([l,h,g,y],0,n,i),_e([y,m,d,f],0,n,i)}var s,a;return i}function Wr(t,e){return Zt(t,0,t.length,e)}function Zt(t,e,n,r,i){const s=i||[],a=t[e],o=t[n-1];let l=0,u=1;for(let c=e+1;c<n-1;++c){const f=qr(t[c],a,o);f>l&&(l=f,u=c)}return Math.sqrt(l)>r?(Zt(t,e,u+1,r,s),Zt(t,u,n,r,s)):(s.length||s.push(a),s.push(o)),s}function he(t,e=.15,n){const r=[],i=(t.length-1)/3;for(let s=0;s<i;s++)_e(t,3*s,e,r);return n&&n>0?Zt(r,0,r.length,n):r}const q="none";class Qt{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,n,r){return{shape:e,sets:n||[],options:r||this.defaultOptions}}line(e,n,r,i,s){const a=this._o(s);return this._d("line",[On(e,n,r,i,a)],a)}rectangle(e,n,r,i,s){const a=this._o(s),o=[],l=Dr(e,n,r,i,a);if(a.fill){const u=[[e,n],[e+r,n],[e+r,n+i],[e,n+i]];a.fillStyle==="solid"?o.push(ce([u],a)):o.push(lt([u],a))}return a.stroke!==q&&o.push(l),this._d("rectangle",o,a)}ellipse(e,n,r,i,s){const a=this._o(s),o=[],l=Tn(r,i,a),u=me(e,n,a,l);if(a.fill)if(a.fillStyle==="solid"){const c=me(e,n,a,l).opset;c.type="fillPath",o.push(c)}else o.push(lt([u.estimatedPoints],a));return a.stroke!==q&&o.push(u.opset),this._d("ellipse",o,a)}circle(e,n,r,i){const s=this.ellipse(e,n,r,r,i);return s.shape="circle",s}linearPath(e,n){const r=this._o(n);return this._d("linearPath",[qt(e,!1,r)],r)}arc(e,n,r,i,s,a,o=!1,l){const u=this._o(l),c=[],f=Ge(e,n,r,i,s,a,o,!0,u);if(o&&u.fill)if(u.fillStyle==="solid"){const h=Object.assign({},u);h.disableMultiStroke=!0;const p=Ge(e,n,r,i,s,a,!0,!1,h);p.type="fillPath",c.push(p)}else c.push(function(h,p,d,g,m,y,_){const w=h,k=p;let M=Math.abs(d/2),S=Math.abs(g/2);M+=x(.01*M,_),S+=x(.01*S,_);let C=m,E=y;for(;C<0;)C+=2*Math.PI,E+=2*Math.PI;E-C>2*Math.PI&&(C=0,E=2*Math.PI);const st=(E-C)/_.curveStepCount,L=[];for(let v=C;v<=E;v+=st)L.push([w+M*Math.cos(v),k+S*Math.sin(v)]);return L.push([w+M*Math.cos(E),k+S*Math.sin(E)]),L.push([w,k]),lt([L],_)}(e,n,r,i,s,a,u));return u.stroke!==q&&c.push(f),this._d("arc",c,u)}curve(e,n){const r=this._o(n),i=[],s=Be(e,r);if(r.fill&&r.fill!==q)if(r.fillStyle==="solid"){const a=Be(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(a.ops)})}else{const a=[],o=e;if(o.length){const l=typeof o[0][0]=="number"?[o]:o;for(const u of l)u.length<3?a.push(...u):u.length===3?a.push(...he(je([u[0],u[0],u[1],u[2]]),10,(1+r.roughness)/2)):a.push(...he(je(u),10,(1+r.roughness)/2))}a.length&&i.push(lt([a],r))}return r.stroke!==q&&i.push(s),this._d("curve",i,r)}polygon(e,n){const r=this._o(n),i=[],s=qt(e,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(ce([e],r)):i.push(lt([e],r))),r.stroke!==q&&i.push(s),this._d("polygon",i,r)}path(e,n){const r=this._o(n),i=[];if(!e)return this._d("path",i,r);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=r.fill&&r.fill!=="transparent"&&r.fill!==q,a=r.stroke!==q,o=!!(r.simplification&&r.simplification<1),l=function(c,f,h){const p=Cn(Nn(Pe(c))),d=[];let g=[],m=[0,0],y=[];const _=()=>{y.length>=4&&g.push(...he(y,f)),y=[]},w=()=>{_(),g.length&&(d.push(g),g=[])};for(const{key:M,data:S}of p)switch(M){case"M":w(),m=[S[0],S[1]],g.push(m);break;case"L":_(),g.push([S[0],S[1]]);break;case"C":if(!y.length){const C=g.length?g[g.length-1]:m;y.push([C[0],C[1]])}y.push([S[0],S[1]]),y.push([S[2],S[3]]),y.push([S[4],S[5]]);break;case"Z":_(),g.push([m[0],m[1]])}if(w(),!h)return d;const k=[];for(const M of d){const S=Wr(M,h);S.length&&k.push(S)}return k}(e,1,o?4-4*(r.simplification||1):(1+r.roughness)/2),u=Ue(e,r);if(s)if(r.fillStyle==="solid")if(l.length===1){const c=Ue(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(c.ops)})}else i.push(ce(l,r));else i.push(lt(l,r));return a&&(o?l.forEach(c=>{i.push(qt(c,!1,r))}):i.push(u)),this._d("path",i,r)}opsToPath(e,n){let r="";for(const i of e.ops){const s=typeof n=="number"&&n>=0?i.data.map(a=>+a.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":r+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":r+=`L${s[0]} ${s[1]} `}}return r.trim()}toPaths(e){const n=e.sets||[],r=e.options||this.defaultOptions,i=[];for(const s of n){let a=null;switch(s.type){case"path":a={d:this.opsToPath(s),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:q};break;case"fillPath":a={d:this.opsToPath(s),stroke:q,strokeWidth:0,fill:r.fill||q};break;case"fillSketch":a=this.fillSketch(s,r)}a&&i.push(a)}return i}fillSketch(e,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(e),stroke:n.fill||q,strokeWidth:r,fill:q}}_mergedShape(e){return e.filter((n,r)=>r===0||n.op!=="move")}}class Fr{constructor(e,n){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new Qt(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.ctx,s=e.options.fixedDecimalPlaceDigits;for(const a of n)switch(a.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,a,s),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const o=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,a,s,o),i.restore();break}case"fillSketch":this.fillSketch(i,a,r)}}fillSketch(e,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),e.save(),r.fillLineDash&&e.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(e.lineDashOffset=r.fillLineDashOffset),e.strokeStyle=r.fill||"",e.lineWidth=i,this._drawToContext(e,n,r.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,n,r,i="nonzero"){e.beginPath();for(const s of n.ops){const a=typeof r=="number"&&r>=0?s.data.map(o=>+o.toFixed(r)):s.data;switch(s.op){case"move":e.moveTo(a[0],a[1]);break;case"bcurveTo":e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"lineTo":e.lineTo(a[0],a[1])}}n.type==="fillPath"?e.fill(i):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,n,r,i,s){const a=this.gen.line(e,n,r,i,s);return this.draw(a),a}rectangle(e,n,r,i,s){const a=this.gen.rectangle(e,n,r,i,s);return this.draw(a),a}ellipse(e,n,r,i,s){const a=this.gen.ellipse(e,n,r,i,s);return this.draw(a),a}circle(e,n,r,i){const s=this.gen.circle(e,n,r,i);return this.draw(s),s}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r),r}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r),r}arc(e,n,r,i,s,a,o=!1,l){const u=this.gen.arc(e,n,r,i,s,a,o,l);return this.draw(u),u}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r),r}path(e,n){const r=this.gen.path(e,n);return this.draw(r),r}}const Rt="http://www.w3.org/2000/svg";class Vr{constructor(e,n){this.svg=e,this.gen=new Qt(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,s=i.createElementNS(Rt,"g"),a=e.options.fixedDecimalPlaceDigits;for(const o of n){let l=null;switch(o.type){case"path":l=i.createElementNS(Rt,"path"),l.setAttribute("d",this.opsToPath(o,a)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break;case"fillPath":l=i.createElementNS(Rt,"path"),l.setAttribute("d",this.opsToPath(o,a)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(i,o,r)}l&&s.appendChild(l)}return s}fillSketch(e,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const s=e.createElementNS(Rt,"path");return s.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),s.setAttribute("stroke",r.fill||""),s.setAttribute("stroke-width",i+""),s.setAttribute("fill","none"),r.fillLineDash&&s.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,n){return this.gen.opsToPath(e,n)}line(e,n,r,i,s){const a=this.gen.line(e,n,r,i,s);return this.draw(a)}rectangle(e,n,r,i,s){const a=this.gen.rectangle(e,n,r,i,s);return this.draw(a)}ellipse(e,n,r,i,s){const a=this.gen.ellipse(e,n,r,i,s);return this.draw(a)}circle(e,n,r,i){const s=this.gen.circle(e,n,r,i);return this.draw(s)}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r)}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r)}arc(e,n,r,i,s,a,o=!1,l){const u=this.gen.arc(e,n,r,i,s,a,o,l);return this.draw(u)}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r)}path(e,n){const r=this.gen.path(e,n);return this.draw(r)}}var Br={canvas:(t,e)=>new Fr(t,e),svg:(t,e)=>new Vr(t,e),generator:t=>new Qt(t),newSeed:()=>Qt.newSeed()};function Ft(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Gr(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Rn(t){let e,n,r;t.length!==2?(e=Ft,n=(o,l)=>Ft(t(o),l),r=(o,l)=>t(o)-l):(e=t===Ft||t===Gr?t:Ur,n=t,r=t);function i(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(o[f],l)<0?u=f+1:c=f}while(u<c)}return u}function s(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(o[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function a(o,l,u=0,c=o.length){const f=i(o,l,u,c-1);return f>u&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:a,right:s}}function Ur(){return 0}function Zr(t){return t===null?NaN:+t}const Qr=Rn(Ft),Yr=Qr.right;Rn(Zr).center;const jr=Yr;function Xr(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}const Kr=Math.sqrt(50),Jr=Math.sqrt(10),ti=Math.sqrt(2);function Yt(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=Kr?10:s>=Jr?5:s>=ti?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/a,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*a,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?Yt(t,e,n*2):[o,l,u]}function ei(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?Yt(e,t,n):Yt(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let u=0;u<o;++u)l[u]=(s-u)/-a;else for(let u=0;u<o;++u)l[u]=(s-u)*a;else if(a<0)for(let u=0;u<o;++u)l[u]=(i+u)/-a;else for(let u=0;u<o;++u)l[u]=(i+u)*a;return l}function we(t,e,n){return e=+e,t=+t,n=+n,Yt(t,e,n)[2]}function ni(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?we(e,t,n):we(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}var be="http://www.w3.org/1999/xhtml";const Xe={svg:"http://www.w3.org/2000/svg",xhtml:be,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function In(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Xe.hasOwnProperty(e)?{space:Xe[e],local:t}:t}function ri(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===be&&e.documentElement.namespaceURI===be?e.createElement(t):e.createElementNS(n,t)}}function ii(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function zn(t){var e=In(t);return(e.local?ii:ri)(e)}function si(){}function Dn(t){return t==null?si:function(){return this.querySelector(t)}}function oi(t){typeof t!="function"&&(t=Dn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),l,u,c=0;c<a;++c)(l=s[c])&&(u=t.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),o[c]=u);return new W(r,this._parents)}function ai(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function li(){return[]}function ui(t){return t==null?li:function(){return this.querySelectorAll(t)}}function fi(t){return function(){return ai(t.apply(this,arguments))}}function ci(t){typeof t=="function"?t=fi(t):t=ui(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&(r.push(t.call(l,l.__data__,u,a)),i.push(l));return new W(r,i)}function hi(t){return function(){return this.matches(t)}}function Hn(t){return function(e){return e.matches(t)}}var di=Array.prototype.find;function pi(t){return function(){return di.call(this.children,t)}}function gi(){return this.firstElementChild}function mi(t){return this.select(t==null?gi:pi(typeof t=="function"?t:Hn(t)))}var yi=Array.prototype.filter;function _i(){return Array.from(this.children)}function wi(t){return function(){return yi.call(this.children,t)}}function bi(t){return this.selectAll(t==null?_i:wi(typeof t=="function"?t:Hn(t)))}function xi(t){typeof t!="function"&&(t=hi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,u=0;u<a;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new W(r,this._parents)}function qn(t){return new Array(t.length)}function Mi(){return new W(this._enter||this._groups.map(qn),this._parents)}function jt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}jt.prototype={constructor:jt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function vi(t){return function(){return t}}function ki(t,e,n,r,i,s){for(var a=0,o,l=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new jt(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function Si(t,e,n,r,i,s,a){var o,l,u=new Map,c=e.length,f=s.length,h=new Array(c),p;for(o=0;o<c;++o)(l=e[o])&&(h[o]=p=a.call(l,l.__data__,o,e)+"",u.has(p)?i[o]=l:u.set(p,l));for(o=0;o<f;++o)p=a.call(t,s[o],o,s)+"",(l=u.get(p))?(r[o]=l,l.__data__=s[o],u.delete(p)):n[o]=new jt(t,s[o]);for(o=0;o<c;++o)(l=e[o])&&u.get(h[o])===l&&(i[o]=l)}function Ai(t){return t.__data__}function $i(t,e){if(!arguments.length)return Array.from(this,Ai);var n=e?Si:ki,r=this._parents,i=this._groups;typeof t!="function"&&(t=vi(t));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],f=i[u],h=f.length,p=Pi(t.call(c,c&&c.__data__,u,r)),d=p.length,g=o[u]=new Array(d),m=a[u]=new Array(d),y=l[u]=new Array(h);n(c,f,g,m,y,p,e);for(var _=0,w=0,k,M;_<d;++_)if(k=g[_]){for(_>=w&&(w=_+1);!(M=m[w])&&++w<d;);k._next=M||null}}return a=new W(a,r),a._enter=o,a._exit=l,a}function Pi(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ni(){return new W(this._exit||this._groups.map(qn),this._parents)}function Ci(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Ei(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var u=n[l],c=r[l],f=u.length,h=o[l]=new Array(f),p,d=0;d<f;++d)(p=u[d]||c[d])&&(h[d]=p);for(;l<i;++l)o[l]=n[l];return new W(o,this._parents)}function Oi(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Ti(t){t||(t=Li);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),u,c=0;c<o;++c)(u=a[c])&&(l[c]=u);l.sort(e)}return new W(i,this._parents).order()}function Li(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ri(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ii(){return Array.from(this)}function zi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function Di(){let t=0;for(const e of this)++t;return t}function Hi(){return!this.node()}function qi(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function Wi(t){return function(){this.removeAttribute(t)}}function Fi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Vi(t,e){return function(){this.setAttribute(t,e)}}function Bi(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Gi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ui(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Zi(t,e){var n=In(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Fi:Wi:typeof e=="function"?n.local?Ui:Gi:n.local?Bi:Vi)(n,e))}function Wn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Qi(t){return function(){this.style.removeProperty(t)}}function Yi(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ji(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Xi(t,e,n){return arguments.length>1?this.each((e==null?Qi:typeof e=="function"?ji:Yi)(t,e,n??"")):Ki(this.node(),t)}function Ki(t,e){return t.style.getPropertyValue(e)||Wn(t).getComputedStyle(t,null).getPropertyValue(e)}function Ji(t){return function(){delete this[t]}}function ts(t,e){return function(){this[t]=e}}function es(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ns(t,e){return arguments.length>1?this.each((e==null?Ji:typeof e=="function"?es:ts)(t,e)):this.node()[t]}function Fn(t){return t.trim().split(/^|\s+/)}function Ne(t){return t.classList||new Vn(t)}function Vn(t){this._node=t,this._names=Fn(t.getAttribute("class")||"")}Vn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Bn(t,e){for(var n=Ne(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Gn(t,e){for(var n=Ne(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function rs(t){return function(){Bn(this,t)}}function is(t){return function(){Gn(this,t)}}function ss(t,e){return function(){(e.apply(this,arguments)?Bn:Gn)(this,t)}}function os(t,e){var n=Fn(t+"");if(arguments.length<2){for(var r=Ne(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?ss:e?rs:is)(n,e))}function as(){this.textContent=""}function ls(t){return function(){this.textContent=t}}function us(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function fs(t){return arguments.length?this.each(t==null?as:(typeof t=="function"?us:ls)(t)):this.node().textContent}function cs(){this.innerHTML=""}function hs(t){return function(){this.innerHTML=t}}function ds(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ps(t){return arguments.length?this.each(t==null?cs:(typeof t=="function"?ds:hs)(t)):this.node().innerHTML}function gs(){this.nextSibling&&this.parentNode.appendChild(this)}function ms(){return this.each(gs)}function ys(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _s(){return this.each(ys)}function ws(t){var e=typeof t=="function"?t:zn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function bs(){return null}function xs(t,e){var n=typeof t=="function"?t:zn(t),r=e==null?bs:typeof e=="function"?e:Dn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ms(){var t=this.parentNode;t&&t.removeChild(this)}function vs(){return this.each(Ms)}function ks(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ss(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function As(t){return this.select(t?Ss:ks)}function $s(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ps(t){return function(e){t.call(this,e,this.__data__)}}function Ns(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Cs(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function Es(t,e,n){return function(){var r=this.__on,i,s=Ps(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Os(t,e,n){var r=Ns(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,c;l<u;++l)for(i=0,c=o[l];i<s;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(o=e?Es:Cs,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function Un(t,e,n){var r=Wn(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ts(t,e){return function(){return Un(this,t,e)}}function Ls(t,e){return function(){return Un(this,t,e.apply(this,arguments))}}function Rs(t,e){return this.each((typeof e=="function"?Ls:Ts)(t,e))}function*Is(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var zs=[null];function W(t,e){this._groups=t,this._parents=e}function Ds(){return this}W.prototype={constructor:W,select:oi,selectAll:ci,selectChild:mi,selectChildren:bi,filter:xi,data:$i,enter:Mi,exit:Ni,join:Ci,merge:Ei,selection:Ds,order:Oi,sort:Ti,call:Ri,nodes:Ii,node:zi,size:Di,empty:Hi,each:qi,attr:Zi,style:Xi,property:ns,classed:os,text:fs,html:ps,raise:ms,lower:_s,append:ws,insert:xs,remove:vs,clone:As,datum:$s,on:Os,dispatch:Rs,[Symbol.iterator]:Is};function Hs(t){return typeof t=="string"?new W([[document.querySelector(t)]],[document.documentElement]):new W([[t]],zs)}function N(t){return function(){return t}}const xe=Math.PI,Me=2*xe,K=1e-6,qs=Me-K;function Zn(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ws(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Zn;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Fs{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Zn:Ws(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,u=i-n,c=a-e,f=o-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>K)if(!(Math.abs(f*l-u*c)>K)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-a,d=i-o,g=l*l+u*u,m=p*p+d*d,y=Math.sqrt(g),_=Math.sqrt(h),w=s*Math.tan((xe-Math.acos((g+h-m)/(2*y*_)))/2),k=w/_,M=w/y;Math.abs(k-1)>K&&this._append`L${e+k*c},${n+k*f}`,this._append`A${s},${s},0,0,${+(f*p>c*d)},${this._x1=e+M*l},${this._y1=n+M*u}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=e+o,c=n+l,f=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>K||Math.abs(this._y1-c)>K)&&this._append`L${u},${c}`,r&&(h<0&&(h=h%Me+Me),h>qs?this._append`A${r},${r},0,1,${f},${e-o},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:h>K&&this._append`A${r},${r},0,${+(h>=xe)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Qn(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Fs(e)}function Ce(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Yn(t){this._context=t}Yn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function jn(t){return new Yn(t)}function Xn(t){return t[0]}function Kn(t){return t[1]}function Vs(t,e){var n=N(!0),r=null,i=jn,s=null,a=Qn(o);t=typeof t=="function"?t:t===void 0?Xn:N(t),e=typeof e=="function"?e:e===void 0?Kn:N(e);function o(l){var u,c=(l=Ce(l)).length,f,h=!1,p;for(r==null&&(s=i(p=a())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,u,l),+e(f,u,l));if(p)return s=null,p+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:N(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:N(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:N(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function Bs(t,e,n){var r=null,i=N(!0),s=null,a=jn,o=null,l=Qn(u);t=typeof t=="function"?t:t===void 0?Xn:N(+t),e=typeof e=="function"?e:N(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Kn:N(+n);function u(f){var h,p,d,g=(f=Ce(f)).length,m,y=!1,_,w=new Array(g),k=new Array(g);for(s==null&&(o=a(_=l())),h=0;h<=g;++h){if(!(h<g&&i(m=f[h],h,f))===y)if(y=!y)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),d=h-1;d>=p;--d)o.point(w[d],k[d]);o.lineEnd(),o.areaEnd()}y&&(w[h]=+t(m,h,f),k[h]=+e(m,h,f),o.point(r?+r(m,h,f):w[h],n?+n(m,h,f):k[h]))}if(_)return o=null,_+""||null}function c(){return Vs().defined(i).curve(a).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:N(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:N(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:N(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:N(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:N(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:N(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:N(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,s!=null&&(o=a(s)),u):a},u.context=function(f){return arguments.length?(f==null?s=o=null:o=a(s=f),u):s},u}function Ke(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Je(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Gs(t,e){return t[e]}function Us(t){const e=[];return e.key=t,e}function Zs(){var t=N([]),e=Je,n=Ke,r=Gs;function i(s){var a=Array.from(t.apply(this,arguments),Us),o,l=a.length,u=-1,c;for(const f of s)for(o=0,++u;o<l;++o)(a[o][u]=[0,+r(f,a[o].key,u,s)]).data=f;for(o=0,c=Ce(e(a));o<l;++o)a[c[o]].index=o;return n(a,c),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:N(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:N(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?Je:typeof s=="function"?s:N(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Ke,i):n},i}function Qs(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ee(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Jn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Et(){}var vt=.7,Xt=1/vt,gt="\\s*([+-]?\\d+)\\s*",kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Q="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ys=/^#([0-9a-f]{3,8})$/,js=new RegExp(`^rgb\\(${gt},${gt},${gt}\\)$`),Xs=new RegExp(`^rgb\\(${Q},${Q},${Q}\\)$`),Ks=new RegExp(`^rgba\\(${gt},${gt},${gt},${kt}\\)$`),Js=new RegExp(`^rgba\\(${Q},${Q},${Q},${kt}\\)$`),to=new RegExp(`^hsl\\(${kt},${Q},${Q}\\)$`),eo=new RegExp(`^hsla\\(${kt},${Q},${Q},${kt}\\)$`),tn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ee(Et,St,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:en,formatHex:en,formatHex8:no,formatHsl:ro,formatRgb:nn,toString:nn});function en(){return this.rgb().formatHex()}function no(){return this.rgb().formatHex8()}function ro(){return tr(this).formatHsl()}function nn(){return this.rgb().formatRgb()}function St(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ys.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rn(e):n===3?new D(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?It(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?It(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=js.exec(t))?new D(e[1],e[2],e[3],1):(e=Xs.exec(t))?new D(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ks.exec(t))?It(e[1],e[2],e[3],e[4]):(e=Js.exec(t))?It(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=to.exec(t))?an(e[1],e[2]/100,e[3]/100,1):(e=eo.exec(t))?an(e[1],e[2]/100,e[3]/100,e[4]):tn.hasOwnProperty(t)?rn(tn[t]):t==="transparent"?new D(NaN,NaN,NaN,0):null}function rn(t){return new D(t>>16&255,t>>8&255,t&255,1)}function It(t,e,n,r){return r<=0&&(t=e=n=NaN),new D(t,e,n,r)}function io(t){return t instanceof Et||(t=St(t)),t?(t=t.rgb(),new D(t.r,t.g,t.b,t.opacity)):new D}function ve(t,e,n,r){return arguments.length===1?io(t):new D(t,e,n,r??1)}function D(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ee(D,ve,Jn(Et,{brighter(t){return t=t==null?Xt:Math.pow(Xt,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?vt:Math.pow(vt,t),new D(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new D(rt(this.r),rt(this.g),rt(this.b),Kt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sn,formatHex:sn,formatHex8:so,formatRgb:on,toString:on}));function sn(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}`}function so(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}${tt((isNaN(this.opacity)?1:this.opacity)*255)}`}function on(){const t=Kt(this.opacity);return`${t===1?"rgb(":"rgba("}${rt(this.r)}, ${rt(this.g)}, ${rt(this.b)}${t===1?")":`, ${t})`}`}function Kt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function rt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function tt(t){return t=rt(t),(t<16?"0":"")+t.toString(16)}function an(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new G(t,e,n,r)}function tr(t){if(t instanceof G)return new G(t.h,t.s,t.l,t.opacity);if(t instanceof Et||(t=St(t)),!t)return new G;if(t instanceof G)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new G(a,o,l,t.opacity)}function oo(t,e,n,r){return arguments.length===1?tr(t):new G(t,e,n,r??1)}function G(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ee(G,oo,Jn(Et,{brighter(t){return t=t==null?Xt:Math.pow(Xt,t),new G(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?vt:Math.pow(vt,t),new G(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new D(de(t>=240?t-240:t+120,i,r),de(t,i,r),de(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new G(ln(this.h),zt(this.s),zt(this.l),Kt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Kt(this.opacity);return`${t===1?"hsl(":"hsla("}${ln(this.h)}, ${zt(this.s)*100}%, ${zt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ln(t){return t=(t||0)%360,t<0?t+360:t}function zt(t){return Math.max(0,Math.min(1,t||0))}function de(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Oe=t=>()=>t;function ao(t,e){return function(n){return t+n*e}}function lo(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function uo(t){return(t=+t)==1?er:function(e,n){return n-e?lo(e,n,t):Oe(isNaN(e)?n:e)}}function er(t,e){var n=e-t;return n?ao(t,n):Oe(isNaN(t)?e:t)}const un=function t(e){var n=uo(e);function r(i,s){var a=n((i=ve(i)).r,(s=ve(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),u=er(i.opacity,s.opacity);return function(c){return i.r=a(c),i.g=o(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function fo(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function co(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ho(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Te(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function po(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Jt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function go(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Te(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var ke=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pe=new RegExp(ke.source,"g");function mo(t){return function(){return t}}function yo(t){return function(e){return t(e)+""}}function _o(t,e){var n=ke.lastIndex=pe.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=ke.exec(t))&&(i=pe.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:Jt(r,i)})),n=pe.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?yo(l[0].x):mo(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)o[(f=l[c]).i]=f.x(u);return o.join("")})}function Te(t,e){var n=typeof e,r;return e==null||n==="boolean"?Oe(e):(n==="number"?Jt:n==="string"?(r=St(e))?(e=r,un):_o:e instanceof St?un:e instanceof Date?po:co(e)?fo:Array.isArray(e)?ho:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?go:Jt)(t,e)}function wo(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function bo(t){return function(){return t}}function xo(t){return+t}var fn=[0,1];function ft(t){return t}function Se(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:bo(isNaN(e)?NaN:.5)}function Mo(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function vo(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=Se(i,r),s=n(a,s)):(r=Se(r,i),s=n(s,a)),function(o){return s(r(o))}}function ko(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Se(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=jr(t,o,1,r)-1;return s[l](i[l](o))}}function So(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ao(){var t=fn,e=fn,n=Te,r,i,s,a=ft,o,l,u;function c(){var h=Math.min(t.length,e.length);return a!==ft&&(a=Mo(t[0],t[h-1])),o=h>2?ko:vo,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=o(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((u||(u=o(e,t.map(r),Jt)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,xo),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=wo,c()},f.clamp=function(h){return arguments.length?(a=h?!0:ft,c()):a!==ft},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return r=h,i=p,c()}}function $o(){return Ao()(ft,ft)}function Po(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function te(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function mt(t){return t=te(Math.abs(t)),t?t[1]:NaN}function No(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function Co(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Eo=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ee(t){if(!(e=Eo.exec(t)))throw new Error("invalid format: "+t);var e;return new Le({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ee.prototype=Le.prototype;function Le(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Le.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Oo(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var nr;function To(t,e){var n=te(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(nr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+te(t,Math.max(0,e+s-1))[0]}function cn(t,e){var n=te(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const hn={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Po,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>cn(t*100,e),r:cn,s:To,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function dn(t){return t}var pn=Array.prototype.map,gn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Lo(t){var e=t.grouping===void 0||t.thousands===void 0?dn:No(pn.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?dn:Co(pn.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=ee(f);var h=f.fill,p=f.align,d=f.sign,g=f.symbol,m=f.zero,y=f.width,_=f.comma,w=f.precision,k=f.trim,M=f.type;M==="n"?(_=!0,M="g"):hn[M]||(w===void 0&&(w=12),k=!0,M="g"),(m||h==="0"&&p==="=")&&(m=!0,h="0",p="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",C=g==="$"?r:/[%p]/.test(M)?a:"",E=hn[M],st=/[defgprs%]/.test(M);w=w===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function L(v){var U=S,A=C,$,H,F;if(M==="c")A=E(v)+A,v="";else{v=+v;var V=v<0||1/v<0;if(v=isNaN(v)?l:E(Math.abs(v),w),k&&(v=Oo(v)),V&&+v==0&&d!=="+"&&(V=!1),U=(V?d==="("?d:o:d==="-"||d==="("?"":d)+U,A=(M==="s"?gn[8+nr/3]:"")+A+(V&&d==="("?")":""),st){for($=-1,H=v.length;++$<H;)if(F=v.charCodeAt($),48>F||F>57){A=(F===46?i+v.slice($+1):v.slice($))+A,v=v.slice(0,$);break}}}_&&!m&&(v=e(v,1/0));var ot=U.length+v.length+A.length,B=ot<y?new Array(y-ot+1).join(h):"";switch(_&&m&&(v=e(B+v,B.length?y-A.length:1/0),B=""),p){case"<":v=U+v+A+B;break;case"=":v=U+B+v+A;break;case"^":v=B.slice(0,ot=B.length>>1)+U+v+A+B.slice(ot);break;default:v=B+U+v+A;break}return s(v)}return L.toString=function(){return f+""},L}function c(f,h){var p=u((f=ee(f),f.type="f",f)),d=Math.max(-8,Math.min(8,Math.floor(mt(h)/3)))*3,g=Math.pow(10,-d),m=gn[8+d/3];return function(y){return p(g*y)+m}}return{format:u,formatPrefix:c}}var Dt,rr,ir;Ro({thousands:",",grouping:[3],currency:["$",""]});function Ro(t){return Dt=Lo(t),rr=Dt.format,ir=Dt.formatPrefix,Dt}function Io(t){return Math.max(0,-mt(Math.abs(t)))}function zo(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mt(e)/3)))*3-mt(Math.abs(t)))}function Do(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,mt(e)-mt(t))+1}function Ho(t,e,n,r){var i=ni(t,e,n),s;switch(r=ee(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=zo(i,a))&&(r.precision=s),ir(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Do(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Io(i))&&(r.precision=s-(r.type==="%")*2);break}}return rr(r)}function qo(t){var e=t.domain;return t.ticks=function(n){var r=e();return ei(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Ho(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,u,c=10;for(o<a&&(u=a,a=o,o=u,u=i,i=s,s=u);c-- >0;){if(u=we(a,o,n),u===l)return r[i]=a,r[s]=o,e(r);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function Ae(){var t=$o();return t.copy=function(){return So(t,Ae())},Qs.apply(t,arguments),qo(t)}function mn(t,e,n){const r=t.slice();return r[4]=e[n],r}function yn(t){let e,n,r=t[4]+"",i,s,a;return{c(){e=O("g"),n=O("text"),i=Z(r),s=Z("%"),b(n,"x","35"),b(n,"y","-5"),b(n,"transform",a="translate("+t[0].left+","+t[0].top+") rotate(-90)"),b(e,"class","tick"),b(e,"transform","translate(0, "+Fo*t[4]+")")},m(o,l){z(o,e,l),P(e,n),P(n,i),P(n,s)},p(o,l){l&1&&a!==(a="translate("+o[0].left+","+o[0].top+") rotate(-90)")&&b(n,"transform",a)},d(o){o&&T(e)}}}function Wo(t){let e,n,r,i,s,a,o,l,u,c,f,h,p=Bt(t[1]),d=[];for(let g=0;g<p.length;g+=1)d[g]=yn(mn(t,p,g));return{c(){e=O("g"),n=O("text"),r=O("tspan"),i=Z("Percent"),s=et(),a=O("tspan"),o=Z("of free"),l=et(),u=O("tspan"),c=Z("Black people"),f=et();for(let g=0;g<d.length;g+=1)d[g].c();b(r,"x","35"),b(r,"y","-25"),b(r,"text-anchor","middle"),b(a,"x","35"),b(a,"y","-15"),b(a,"text-anchor","middle"),b(u,"x","35"),b(u,"y","-5"),b(u,"text-anchor","middle"),b(n,"class","axis axis_02_title"),b(n,"transform",h="translate("+t[0].left+","+t[0].top+") rotate(-90)"),b(e,"class","axis axis-y")},m(g,m){z(g,e,m),P(e,n),P(n,r),P(r,i),P(n,s),P(n,a),P(a,o),P(n,l),P(n,u),P(u,c),P(n,f);for(let y=0;y<d.length;y+=1)d[y]&&d[y].m(e,null)},p(g,[m]){if(m&1&&h!==(h="translate("+g[0].left+","+g[0].top+") rotate(-90)")&&b(n,"transform",h),m&3){p=Bt(g[1]);let y;for(y=0;y<p.length;y+=1){const _=mn(g,p,y);d[y]?d[y].p(_,m):(d[y]=yn(_),d[y].c(),d[y].m(e,null))}for(;y<d.length;y+=1)d[y].d(1);d.length=p.length}},i:it,o:it,d(g){g&&T(e),Sn(d,g)}}}const Fo=112;function Vo(t,e,n){let{yScale:r}=e,{width:i}=e,{margin:s}=e;const a=[1,2,3];return t.$$set=o=>{"yScale"in o&&n(2,r=o.yScale),"width"in o&&n(3,i=o.width),"margin"in o&&n(0,s=o.margin)},[s,a,r,i]}class Bo extends Nt{constructor(e){super(),Pt(this,e,Vo,Wo,$t,{yScale:2,width:3,margin:0})}}function Go(t){let e,n,r,i;return{c(){e=O("defs"),n=O("clipPath"),r=O("rect"),b(r,"x","0"),b(r,"y","0"),b(r,"width",i=t[2]-t[1].left-t[1].right),b(r,"height",t[0]),b(n,"id","chart-clip")},m(s,a){z(s,e,a),P(e,n),P(n,r)},p(s,[a]){a&6&&i!==(i=s[2]-s[1].left-s[1].right)&&b(r,"width",i),a&1&&b(r,"height",s[0])},i:it,o:it,d(s){s&&T(e)}}}function Uo(t,e,n){let{clipHeight:r}=e,{margin:i}=e,{width:s}=e;return t.$$set=a=>{"clipHeight"in a&&n(0,r=a.clipHeight),"margin"in a&&n(1,i=a.margin),"width"in a&&n(2,s=a.width)},[r,i,s]}class sr extends Nt{constructor(e){super(),Pt(this,e,Uo,Go,$t,{clipHeight:0,margin:1,width:2})}}function _n(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function wn(t){let e,n;return{c(){e=O("line"),b(e,"x1","0"),b(e,"x2","0"),b(e,"y2",t[1]),b(e,"y1",n=-t[6]),b(e,"clip-path","url(#chart-clip)"),b(e,"stroke","rgba(255,255,255,0.6"),b(e,"stroke-width",t[4]),b(e,"class","svelte-1gvtebg")},m(r,i){z(r,e,i)},p(r,i){i&2&&b(e,"y2",r[1]),i&64&&n!==(n=-r[6])&&b(e,"y1",n),i&16&&b(e,"stroke-width",r[4])},d(r){r&&T(e)}}}function bn(t){let e=t[7]=t[11]===0||t[11]===t[3].length-1?"%":"",n,r,i,s=t[9]+"",a,o,l,u=t[8][t[11]]+"",c,f,h,p,d=(t[11]!==0||t[11]!==t[3].length-1)&&wn(t);return{c(){n=Z(e),r=O("g"),d&&d.c(),i=O("text"),a=Z(s),l=O("text"),c=Z(u),f=Z(t[7]),b(i,"dx","-70"),b(i,"dy",t[11]!==0?"5":"15"),b(i,"transform",o="translate(0, "+t[6]/6+") rotate(-90)"),b(l,"dx","20"),b(l,"dy",t[11]!==0?"5":"15"),b(l,"transform",h="translate(0, "+(-t[6]+t[5].top)+") rotate(-90)"),b(r,"class","tick"),b(r,"transform",p="translate("+t[0](t[9])+","+t[6]+")")},m(g,m){z(g,n,m),z(g,r,m),d&&d.m(r,null),P(r,i),P(i,a),P(r,l),P(l,c),P(l,f)},p(g,m){m&8&&e!==(e=g[7]=g[11]===0||g[11]===g[3].length-1?"%":"")&&De(n,e),g[11]!==0||g[11]!==g[3].length-1?d?d.p(g,m):(d=wn(g),d.c(),d.m(r,i)):d&&(d.d(1),d=null),m&8&&s!==(s=g[9]+"")&&De(a,s),m&64&&o!==(o="translate(0, "+g[6]/6+") rotate(-90)")&&b(i,"transform",o),m&96&&h!==(h="translate(0, "+(-g[6]+g[5].top)+") rotate(-90)")&&b(l,"transform",h),m&73&&p!==(p="translate("+g[0](g[9])+","+g[6]+")")&&b(r,"transform",p)},d(g){g&&(T(n),T(r)),d&&d.d()}}}function Zo(t){let e,n,r,i,s;e=new sr({props:{clipHeight:t[6],margin:t[5],width:t[2]}});let a=Bt(t[3]),o=[];for(let l=0;l<a.length;l+=1)o[l]=bn(_n(t,a,l));return{c(){xt(e.$$.fragment),n=et(),r=O("g");for(let l=0;l<o.length;l+=1)o[l].c();b(r,"class","axis x-axis svelte-1gvtebg"),b(r,"transform",i="translate("+t[5].left+",0)")},m(l,u){dt(e,l,u),z(l,n,u),z(l,r,u);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(r,null);s=!0},p(l,[u]){const c={};if(u&64&&(c.clipHeight=l[6]),u&32&&(c.margin=l[5]),u&4&&(c.width=l[2]),e.$set(c),u&507){a=Bt(l[3]);let f;for(f=0;f<a.length;f+=1){const h=_n(l,a,f);o[f]?o[f].p(h,u):(o[f]=bn(h),o[f].c(),o[f].m(r,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=a.length}(!s||u&32&&i!==(i="translate("+l[5].left+",0)"))&&b(r,"transform",i)},i(l){s||(Y(e.$$.fragment,l),s=!0)},o(l){nt(e.$$.fragment,l),s=!1},d(l){l&&(T(n),T(r)),pt(e,l),Sn(o,l)}}}function Qo(t,e,n){let{xScale:r}=e,{height:i}=e,{width:s}=e,{xTicks:a}=e,{strokeWidth:o}=e,{margin:l}=e,{clipHeight:u}=e,c;const f=["1.3","1.7","1.7","1.2","0.8","0.9","0.7","0.8","100"];return t.$$set=h=>{"xScale"in h&&n(0,r=h.xScale),"height"in h&&n(1,i=h.height),"width"in h&&n(2,s=h.width),"xTicks"in h&&n(3,a=h.xTicks),"strokeWidth"in h&&n(4,o=h.strokeWidth),"margin"in h&&n(5,l=h.margin),"clipHeight"in h&&n(6,u=h.clipHeight)},[r,i,s,a,o,l,u,c,f]}class Yo extends Nt{constructor(e){super(),Pt(this,e,Qo,Zo,$t,{xScale:0,height:1,width:2,xTicks:3,strokeWidth:4,margin:5,clipHeight:6})}}function jo(t){let e,n,r,i,s,a,o,l,u,c;return s=new sr({props:{clipHeight:xn,margin:t[4],width:t[0]}}),o=new Bo({props:{yScale:t[1],width:innerWidth,margin:t[4]}}),l=new Yo({props:{xScale:t[2],clipHeight:xn,height:innerHeight,width:innerWidth,xTicks:t[3],strokeWidth:Xo,margin:t[4]}}),{c(){e=ct("div"),n=ct("h2"),n.textContent="Slaves and free black people.",r=et(),i=O("svg"),xt(s.$$.fragment),a=O("g"),xt(o.$$.fragment),xt(l.$$.fragment),b(n,"id","viz-header"),b(n,"class","svelte-wz73bm"),b(a,"class","areas"),b(a,"transform","translate("+t[4].left+","+t[4].top+")"),b(a,"clip-path","url(#chart-clip)"),b(i,"id","chart"),b(i,"height",or+t[4].bottom),b(i,"width",t[0]),b(i,"class","svelte-wz73bm"),b(e,"class","chart-container svelte-wz73bm"),Vt(()=>t[6].call(e))},m(f,h){z(f,e,h),P(e,n),P(e,r),P(e,i),dt(s,i,null),P(i,a),dt(o,i,null),dt(l,i,null),u=hr(e,t[6].bind(e)),c=!0},p(f,[h]){const p={};h&1&&(p.width=f[0]),s.$set(p);const d={};h&2&&(d.yScale=f[1]),o.$set(d);const g={};h&4&&(g.xScale=f[2]),h&8&&(g.xTicks=f[3]),l.$set(g),(!c||h&1)&&b(i,"width",f[0])},i(f){c||(Y(s.$$.fragment,f),Y(o.$$.fragment,f),Y(l.$$.fragment,f),c=!0)},o(f){nt(s.$$.fragment,f),nt(o.$$.fragment,f),nt(l.$$.fragment,f),c=!1},d(f){f&&T(e),pt(s),pt(o),pt(l),u()}}}let or=7e3;const xn=300,Xo=1.5;function Ko(t,e,n){let r,i,s,a,o,{data:l=[]}=e,u,c=500;const f=["rgba(20,21,19,0.9","rgba(181,24,48,0.9)"],h={top:75,right:20,bottom:40,left:100},p={bowing:.1,fillStyle:"solid",fillWeight:.5,hachureAngle:0,hachureGap:.01,roughness:1,stroke:"rgba(255,255,255,0.6)",strokeWidth:1.5};function d(){console.log("CHART INIT!"),u=Hs("g.areas"),r.forEach((m,y)=>{const _=Br.svg(u.node());p.fill=f[y];const w=_.path(o(m),p);u.append(()=>w)})}An(d);function g(){c=this.clientWidth,n(0,c)}return t.$$set=m=>{"data"in m&&n(5,l=m.data)},t.$$.update=()=>{t.$$.dirty&32&&(r=Zs().keys(l.columns.slice(1))(l)),t.$$.dirty&32&&n(3,i=l.map(m=>m.Year)),t.$$.dirty&33&&n(2,s=Ae().domain(Xr(l,m=>parseInt(m.Year))).range([0,c-h.left-h.right])),t.$$.dirty&6&&(o=Bs().x(m=>s(m.data.Year)).y0(m=>a(m[0])).y1(m=>a(m[1])))},n(1,a=Ae().domain([0,100]).range([or-h.top-h.bottom,0])),[c,a,s,i,h,l,g]}class Jo extends Nt{constructor(e){super(),Pt(this,e,Ko,jo,$t,{data:5})}}function Mn(t){let e,n;return e=new Jo({props:{data:t[0]}}),{c(){xt(e.$$.fragment)},m(r,i){dt(e,r,i),n=!0},p(r,i){const s={};i&1&&(s.data=r[0]),e.$set(s)},i(r){n||(Y(e.$$.fragment,r),n=!0)},o(r){nt(e.$$.fragment,r),n=!1},d(r){pt(e,r)}}}function ta(t){let e,n,r,i,s,a,o=t[0]&&Mn(t);return{c(){e=ct("header"),e.innerHTML='<h1 class="svelte-qmifsu">DuBois Data Portraits</h1> <p class="subhead svelte-qmifsu">Challenge #2. Visit the <a target="_blank" href="https://www.datavisualizationsociety.org/news/2024/2/2/advance-your-data-viz-skills-with-the-weekly-2024-du-bois-visualization-challenge">Data visualization Society</a> for more information.</p>',n=et(),r=ct("main"),o&&o.c(),i=et(),s=ct("footer"),s.innerHTML='<p class="source">Source:  <a href="https:vancouversun.com" target="_blank">TK</a></p>',b(e,"class","svelte-qmifsu")},m(l,u){z(l,e,u),z(l,n,u),z(l,r,u),o&&o.m(r,null),z(l,i,u),z(l,s,u),a=!0},p(l,[u]){l[0]?o?(o.p(l,u),u&1&&Y(o,1)):(o=Mn(l),o.c(),Y(o,1),o.m(r,null)):o&&(_r(),nt(o,1,1,()=>{o=null}),wr())},i(l){a||(Y(o),a=!0)},o(l){nt(o),a=!1},d(l){l&&(T(e),T(n),T(r),T(i),T(s)),o&&o.d()}}}const ea="https://raw.githubusercontent.com/ajstarks/dubois-data-portraits/master/challenge/2024/challenge02/data.csv";function na(t,e,n){let r;async function i(a){const l=await(await fetch(a)).text();return $r(l)}async function s(){n(0,r=await i(ea))}return An(s),[r]}class ra extends Nt{constructor(e){super(),Pt(this,e,na,ta,$t,{})}}new ra({target:document.getElementById("app")});
